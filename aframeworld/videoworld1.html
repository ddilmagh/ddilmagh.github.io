<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Videosphere</title>
  <!-- A-Frame Library from Official CDN -->
  <script src="https://aframe.io/releases/1.2.0/aframe.min.js"></script>
  <!-- Bitmovin Player JS -->
  <script src="https://cdn.bitmovin.com/player/web/8/bitmovinplayer.js"></script>
</head>
<body>
  <a-scene>
    <a-assets>
      <!-- Video element for A-Frame -->
      <video id="aframeVideo" loop crossorigin="anonymous"></video>
    </a-assets>
    <a-videosphere src="#aframeVideo"></a-videosphere>
    <a-camera>
      <a-cursor raycaster="objects: .interactive"></a-cursor>
    </a-camera>
  </a-scene>

  <!-- Invisible Bitmovin Player -->
  <div id="bitmovin-player" style="width: 0; height: 0; visibility: hidden;"></div>

  <!-- Play Button -->
  <button id="playButton" style="position: fixed; bottom: 20px; left: 50%; transform: translateX(-50%);">
    Play Video
  </button>

  <!-- Sound Toggle Button -->
  <button id="soundToggleButton" style="position: fixed; bottom: 60px; left: 50%; transform: translateX(-50%);">
    Mute Sound
  </button>

  <script>
    var globalPlayer; // Global reference to the player

    document.getElementById('playButton').addEventListener('click', function() {
      // ... rest of your code ...

      globalPlayer = player; // Assign the player to the global variable
    });

    // Listener for the sound toggle button
    document.getElementById('soundToggleButton').addEventListener('click', function() {
      // Access the globally stored player
      if (globalPlayer) {
        globalPlayer.isMuted().then((muted) => {
          if (muted) {
            globalPlayer.unmute();
            this.textContent = 'Mute Sound';
          } else {
            globalPlayer.mute();
            this.textContent = 'Unmute Sound';
          }
        }).catch(function(error) {
          console.error('Error while toggling mute state:', error);
        });
      } else {
        console.error('Player instance not found');
      }
    });
  </script>
</body>
</html>
