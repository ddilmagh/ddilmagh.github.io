<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Bitmovin with A-Frame</title>
    
    <!-- Bitmovin Player CSS -->
    <link rel="stylesheet" href="https://cdn.bitmovin.com/player/web/8/bitmovinplayer.css" />
    
    <!-- A-Frame Library -->
    <script src="https://aframe.io/releases/1.2.0/aframe.min.js"></script>
    
    <!-- Bitmovin Player JS -->
    <script src="https://cdn.bitmovin.com/player/web/8/bitmovinplayer.js"></script>
</head>
<body>

<!-- Invisible Bitmovin Player -->
<div id="bitmovin-player" style="width: 0; height: 0; visibility: hidden;"></div>

<!-- A-Frame Scene -->
<a-scene>
    <a-assets></a-assets>
    <a-videosphere></a-videosphere>
    
    <!-- Hotspot -->
    <a-entity 
      geometry="primitive: circle; radius: 0.5" 
      material="color: red; opacity: 0.6" 
      position="0 2 -5" 
      class="hotspot"
      cursor-listener>
    </a-entity>
    
    <a-camera></a-camera>
</a-scene>

<!-- Bitmovin Player Initialization Script -->
<script>
var playerConfig = {
    key: 'd42a907d-dea3-4d57-a114-986d3ebcbef6',
    source: {
        dash: "https://d2104364q3ku40.cloudfront.net/b2a97031-9a97-4c6d-895b-d8388f0d06a5/manifest.mpd",
        hls: "https://streams.bitmovin.com/ckod4hdgd71ilgk6cbo0/manifest.m3u8"
    }
};

var playerContainer = document.getElementById('bitmovin-player');
var player = new bitmovin.player.Player(playerContainer, playerConfig);
player.load(playerConfig.source);

// Capture video texture once video starts playing
player.on(bitmovin.player.PlayerEvent.Play, function() {
    const videoElement = document.querySelector('#bitmovin-player video');
    const texture = new THREE.VideoTexture(videoElement);
    
    // Apply texture to A-Frame videosphere
    const videosphere = document.querySelector('a-videosphere');
    videosphere.setAttribute('material', 'src', texture);
});

// Hotspot interaction
document.querySelector('.hotspot').addEventListener('click', function() {
    alert('Hotspot clicked!');
});
</script>

</body>
</html>
